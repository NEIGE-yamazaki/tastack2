# âœ… Laravel Sail + Capacitor çµ±åˆé–‹ç™ºç’°å¢ƒ

## ğŸ‰ è¨­å®šå®Œäº†ï¼

**Viteã‹ã‚‰Laravel Sailã¸ã®å¤‰æ›´ãŒå®Œäº†ã—ã¾ã—ãŸ**

### ğŸ“‹ æ–°ã—ã„è¨­å®š

| é …ç›® | è¨­å®šå€¤ | èª¬æ˜ |
|------|--------|------|
| **Laravel Sail** | `localhost:8081` | é–‹ç™ºãƒã‚·ãƒ³ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ |
| **Capacitor (ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿)** | `http://10.0.2.2:8081` | ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ |
| **phpMyAdmin** | `localhost:8080` | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç† |

### ğŸš€ çµ±åˆé–‹ç™ºç’°å¢ƒã®èµ·å‹•

```bash
# æœ€ã‚‚ç°¡å˜ãªæ–¹æ³•ï¼ˆæ¨å¥¨ï¼‰
npm run dev:laravel

# ã¾ãŸã¯
npm run laravel:capacitor:dev

# ã¾ãŸã¯æ‰‹å‹•ã§
./scripts/start-laravel-capacitor-dev.sh
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™ï¼š

1. **Laravel Sailèµ·å‹•ç¢ºèªãƒ»è‡ªå‹•èµ·å‹•**
2. **Laravel Sail (localhost:8081) å‹•ä½œç¢ºèª**
3. **ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿èµ·å‹•ç¢ºèªãƒ»è‡ªå‹•èµ·å‹•**
4. **ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‹ã‚‰10.0.2.2:8081ã¸ã®æ¥ç¶šãƒ†ã‚¹ãƒˆ**
5. **Capacitorè¨­å®šã®ç¢ºèªãƒ»è‡ªå‹•è¨­å®š**
6. **ã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰ãƒ»åŒæœŸ**
7. **ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã¸ã®ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
8. **ã‚¢ãƒ—ãƒªã®è‡ªå‹•èµ·å‹•**

### ğŸ”§ æ¥ç¶šãƒ†ã‚¹ãƒˆçµæœ

âœ… **æˆåŠŸ**: ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‹ã‚‰10.0.2.2:8081ã¸ã®æ¥ç¶šãƒ†ã‚¹ãƒˆ
```bash
# åŸºæœ¬æ¥ç¶šãƒ†ã‚¹ãƒˆ
$ adb shell "ping -c 3 10.0.2.2"
âœ… 0% packet loss

# HTTPæ¥ç¶šãƒ†ã‚¹ãƒˆ  
$ adb shell "echo 'GET / HTTP/1.1...' | nc 10.0.2.2 8081"
âœ… HTTP/1.1 200 OK (Laravel response)
```

### ğŸ“± Capacitorè¨­å®š

**ç¾åœ¨ã®è¨­å®š** (`capacitor.config.json`):
```json
{
  "server": {
    "url": "http://10.0.2.2:8081",
    "cleartext": true
  }
}
```

### ğŸ› ï¸ æ—¥å¸¸ã®é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```bash
# 1. é–‹ç™ºç’°å¢ƒèµ·å‹•
npm run dev:laravel

# 2. ãƒ­ã‚°ç›£è¦–ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
npm run android:log

# 3. é–‹ç™ºçµ‚äº†æ™‚
./vendor/bin/sail down              # Laravel Sailåœæ­¢
./scripts/tastack2-android.sh kill  # ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿çµ‚äº†
```

### âš¡ ã‚¯ã‚¤ãƒƒã‚¯ã‚³ãƒãƒ³ãƒ‰

```bash
# Laravel Sailæ“ä½œ
./vendor/bin/sail up -d    # èµ·å‹•
./vendor/bin/sail down     # åœæ­¢
./vendor/bin/sail ps       # çŠ¶æ…‹ç¢ºèª

# ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿æ“ä½œ
./scripts/tastack2-android.sh e    # ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿èµ·å‹•
./scripts/tastack2-android.sh k    # ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿çµ‚äº†
./scripts/tastack2-android.sh d    # ãƒ‡ãƒã‚¤ã‚¹ç¢ºèª

# ã‚¢ãƒ—ãƒªæ“ä½œ
./scripts/tastack2-android.sh st   # ã‚¢ãƒ—ãƒªèµ·å‹•
./scripts/tastack2-android.sh l    # ãƒ­ã‚°ç›£è¦–
```

### ğŸ¯ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ERR_CONNECTION_REFUSED ã®å ´åˆ

1. **Laravel Sailã®ç¢ºèª**:
   ```bash
   docker ps | grep laravel
   curl http://localhost:8081
   ```

2. **ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‹ã‚‰ã®æ¥ç¶šç¢ºèª**:
   ```bash
   adb shell "ping -c 1 10.0.2.2"
   adb shell "nc -z 10.0.2.2 8081"
   ```

3. **Capacitorè¨­å®šã®ç¢ºèª**:
   ```bash
   grep -A3 server capacitor.config.json
   ```

### ğŸŒŸ ã“ã®çµ±åˆã®åˆ©ç‚¹

- **No Vite**: Viteé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ä¸è¦
- **Laravelç›´æ¥**: Laravel Sailã‹ã‚‰ç›´æ¥ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æä¾›
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é–‹ç™º**: ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°
- **ä¸€æ‹¬ç®¡ç†**: ä¸€ã¤ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã¹ã¦èµ·å‹•
- **è‡ªå‹•ãƒ†ã‚¹ãƒˆ**: æ¥ç¶šãƒ†ã‚¹ãƒˆãŒè‡ªå‹•å®Ÿè¡Œ

ã“ã‚Œã§ã€Viteãªã—ã§Laravel Sail + Capacitorã®å®Œå…¨çµ±åˆé–‹ç™ºç’°å¢ƒãŒåˆ©ç”¨ã§ãã¾ã™ï¼
